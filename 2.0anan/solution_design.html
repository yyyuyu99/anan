<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安安 - 方案设计</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- 状态栏 -->
    <div class="status-bar">
        <div class="time">12:30</div>
        <div class="icons">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-full"></i>
        </div>
    </div>

    <!-- 导航栏 -->
    <div class="nav-bar">
        <div class="title">方案设计</div>
        <div class="action" onclick="showHelp()">
            <i class="fas fa-question-circle"></i>
        </div>
    </div>

    <!-- 内容区域 -->
    <div class="content pb-20 animate-fade-in">
        <div class="mb-6">
            <h2 class="text-xl font-bold mb-2 text-gray-800">安防方案定制</h2>
            <p class="text-gray-600 text-sm">根据您的需求，我们将为您设计最适合的安防解决方案</p>
        </div>

        <!-- 方案设计表单 -->
        <div class="card mb-6 animate-slide-up" id="solution-form">
            <div class="form-group">
                <label class="form-label" for="property-type">住宅类型</label>
                <select class="form-select" id="property-type">
                    <option value="">请选择住宅类型</option>
                    <option value="apartment">公寓</option>
                    <option value="house">独栋房屋</option>
                    <option value="villa">别墅</option>
                    <option value="office">办公室</option>
                    <option value="store">商铺</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label" for="area">面积大小</label>
                <select class="form-select" id="area">
                    <option value="">请选择面积范围</option>
                    <option value="small">小于50平方米</option>
                    <option value="medium">50-100平方米</option>
                    <option value="large">100-200平方米</option>
                    <option value="xlarge">大于200平方米</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label" for="budget">预算范围</label>
                <select class="form-select" id="budget">
                    <option value="">请选择预算范围</option>
                    <option value="low">经济型 (1000-3000元)</option>
                    <option value="medium">标准型 (3000-8000元)</option>
                    <option value="high">高配型 (8000-15000元)</option>
                    <option value="premium">专业型 (15000元以上)</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">安防需求 (可多选)</label>
                <div class="grid grid-cols-2 gap-3">
                    <div class="flex items-center bg-white p-3 rounded-lg border border-gray-200">
                        <input type="checkbox" id="need-camera" class="mr-2 h-4 w-4 text-primary-color">
                        <label for="need-camera" class="text-gray-700">监控摄像头</label>
                    </div>
                    <div class="flex items-center bg-white p-3 rounded-lg border border-gray-200">
                        <input type="checkbox" id="need-lock" class="mr-2 h-4 w-4 text-primary-color">
                        <label for="need-lock" class="text-gray-700">智能门锁</label>
                    </div>
                    <div class="flex items-center bg-white p-3 rounded-lg border border-gray-200">
                        <input type="checkbox" id="need-sensor" class="mr-2 h-4 w-4 text-primary-color">
                        <label for="need-sensor" class="text-gray-700">门窗传感器</label>
                    </div>
                    <div class="flex items-center bg-white p-3 rounded-lg border border-gray-200">
                        <input type="checkbox" id="need-alarm" class="mr-2 h-4 w-4 text-primary-color">
                        <label for="need-alarm" class="text-gray-700">报警系统</label>
                    </div>
                    <div class="flex items-center bg-white p-3 rounded-lg border border-gray-200">
                        <input type="checkbox" id="need-intercom" class="mr-2 h-4 w-4 text-primary-color">
                        <label for="need-intercom" class="text-gray-700">可视对讲</label>
                    </div>
                    <div class="flex items-center bg-white p-3 rounded-lg border border-gray-200">
                        <input type="checkbox" id="need-smoke" class="mr-2 h-4 w-4 text-primary-color">
                        <label for="need-smoke" class="text-gray-700">烟雾报警器</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="special-requirements">特殊需求</label>
                <textarea class="form-textarea" id="special-requirements" placeholder="请描述您的特殊需求或关注点..."></textarea>
            </div>

            <div class="flex gap-3">
                <button class="btn btn-primary flex-1" onclick="generateSolution()">
                    生成安防方案
                </button>
                <button class="btn btn-secondary flex-1" onclick="location.href='security_assessment.html'">
                    先进行评估
                </button>
            </div>
        </div>

        <!-- 加载中 -->
        <div id="solution-loading" class="text-center py-10 animate-fade-in" style="display: none;">
            <div class="loading mx-auto mb-4"></div>
            <p class="text-gray-600">AI正在为您设计最佳安防方案...</p>
            <div class="progress mt-4">
                <div class="progress-bar" style="width: 0%" id="progress-bar"></div>
            </div>
        </div>

        <!-- 方案结果 -->
        <div id="solution-result" class="mb-6 animate-fade-in" style="display: none;">
            <h3 class="text-lg font-bold mb-4 text-gray-800">您的定制安防方案</h3>
            
            <div class="card bg-blue-50 border border-blue-200 mb-4 animate-slide-up">
                <h4 class="font-bold text-primary-color mb-2">方案概述</h4>
                <p class="text-sm text-gray-700 mb-4">
                    根据您的需求，我们为您设计了一套适合公寓使用的中等配置安防系统，包含监控摄像头、智能门锁和门窗传感器等核心设备。
                </p>
                <div class="flex items-center justify-between text-sm text-gray-600">
                    <span>预算：¥5,800</span>
                    <span>安装时间：1-2天</span>
                </div>
            </div>
            
            <h4 class="font-bold mb-3 text-gray-800">推荐设备清单</h4>
            
            <div class="bg-white rounded-xl shadow-sm mb-4 animate-slide-up" style="animation-delay: 0.1s;">
                <div class="flex p-4 border-b border-gray-100">
                    <div class="w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center text-primary-color mr-3">
                        <i class="fas fa-camera text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h5 class="font-bold text-gray-800">智能监控摄像头 × 2</h5>
                        <p class="text-xs text-gray-500 mb-1">1080P高清，夜视功能，双向语音</p>
                        <div class="flex justify-between">
                            <span class="text-sm font-semibold text-primary-color">¥699/台</span>
                            <span class="text-xs text-gray-500">推荐安装位置：入口处、客厅</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex p-4 border-b border-gray-100">
                    <div class="w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center text-primary-color mr-3">
                        <i class="fas fa-door-closed text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h5 class="font-bold text-gray-800">智能门锁 × 1</h5>
                        <p class="text-xs text-gray-500 mb-1">指纹识别，密码解锁，远程控制</p>
                        <div class="flex justify-between">
                            <span class="text-sm font-semibold text-primary-color">¥1,899/套</span>
                            <span class="text-xs text-gray-500">推荐安装位置：入户门</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex p-4">
                    <div class="w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center text-primary-color mr-3">
                        <i class="fas fa-wifi text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h5 class="font-bold text-gray-800">门窗传感器 × 4</h5>
                        <p class="text-xs text-gray-500 mb-1">无线连接，低功耗，异常开启报警</p>
                        <div class="flex justify-between">
                            <span class="text-sm font-semibold text-primary-color">¥129/个</span>
                            <span class="text-xs text-gray-500">推荐安装位置：窗户、阳台门</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex gap-3 mb-6 animate-slide-up" style="animation-delay: 0.2s;">
                <button class="btn btn-primary flex-1" onclick="saveSolution()">
                    <i class="fas fa-download mr-2"></i> 保存方案
                </button>
                <button class="btn btn-secondary flex-1" onclick="shareSolution()">
                    <i class="fas fa-share-alt mr-2"></i> 分享
                </button>
            </div>
            
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 animate-slide-up" style="animation-delay: 0.3s;">
                <div class="flex items-start">
                    <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-3"></i>
                    <div>
                        <h5 class="font-bold text-yellow-800 mb-1">专家建议</h5>
                        <p class="text-sm text-gray-700">
                            考虑到您的公寓环境，建议在入口处增加一个可视对讲设备，提高访客管理的安全性。同时，烟雾报警器是保障家庭安全的基础设备，强烈建议配置。
                        </p>
                        <div class="mt-3">
                            <button class="text-primary-color text-sm font-semibold" onclick="location.href='expert_consult.html'">
                                咨询专家获取更多建议 <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 animate-slide-up" style="animation-delay: 0.4s;">
                <button class="btn btn-primary btn-block" onclick="location.href='ai_chat.html?query=我想了解更多关于这个安防方案的细节'">
                    向AI助手咨询方案细节
                </button>
            </div>
        </div>
    </div>

    <!-- 底部标签栏 -->
    <div class="tab-bar">
        <div class="tab-item" onclick="location.href='home.html'">
            <i class="fas fa-home"></i>
            <span>首页</span>
        </div>
        <div class="tab-item" onclick="location.href='ai_chat.html'">
            <i class="fas fa-robot"></i>
            <span>智能问答</span>
        </div>
        <div class="tab-item active">
            <i class="fas fa-drafting-compass"></i>
            <span>方案设计</span>
        </div>
        <div class="tab-item" onclick="location.href='profile.html'">
            <i class="fas fa-user"></i>
            <span>我的</span>
        </div>
    </div>

    <!-- 帮助弹窗 -->
    <div id="help-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden animate-fade-in">
        <div class="bg-white rounded-xl p-6 m-4 max-w-md">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-800">方案设计帮助</h3>
                <button onclick="hideHelp()" class="text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="text-sm text-gray-600">
                <p class="mb-3">方案设计功能可以根据您的具体需求，为您定制专属安防解决方案。</p>
                <p class="mb-3">填写表单时的几点建议：</p>
                <ul class="list-disc pl-5 mb-3">
                    <li class="mb-1">准确选择您的住宅类型和面积，这将影响设备数量和布局</li>
                    <li class="mb-1">根据实际情况设置预算，系统会在预算范围内优化配置</li>
                    <li class="mb-1">勾选您关注的安防需求，可以多选</li>
                    <li class="mb-1">在特殊需求中描述您的具体情况，如有老人、儿童或宠物等</li>
                </ul>
                <p>如果您不确定如何选择，可以先进行安防评估或咨询专家获取建议。</p>
            </div>
            <button class="btn btn-primary btn-block mt-4" onclick="hideHelp()">
                我知道了
            </button>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // 生成安防方案
        function generateSolution() {
            const solutionForm = document.getElementById('solution-form');
            const resultContainer = document.getElementById('solution-result');
            const loadingIndicator = document.getElementById('solution-loading');
            const progressBar = document.getElementById('progress-bar');
            
            // 表单验证
            const propertyType = document.getElementById('property-type').value;
            const area = document.getElementById('area').value;
            const budget = document.getElementById('budget').value;
            
            if (!propertyType || !area || !budget) {
                alert('请填写必要的信息：住宅类型、面积大小和预算范围');
                return;
            }
            
            // 显示加载中
            loadingIndicator.style.display = 'block';
            resultContainer.style.display = 'none';
            
            // 模拟进度条
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 5;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    
                    // 显示结果
                    setTimeout(() => {
                        loadingIndicator.style.display = 'none';
                        resultContainer.style.display = 'block';
                        
                        // 滚动到结果区域
                        resultContainer.scrollIntoView({ behavior: 'smooth' });
                    }, 500);
                }
            }, 150);
        }
        
        // 保存方案
        function saveSolution() {
            alert('方案已保存到"我的方案"');
        }
        
        // 分享方案
        function shareSolution() {
            alert('分享功能已启动，您可以通过微信、QQ等应用分享此方案');
        }
        
        // 显示帮助弹窗
        function showHelp() {
            document.getElementById('help-modal').classList.remove('hidden');
        }
        
        // 隐藏帮助弹窗
        function hideHelp() {
            document.getElementById('help-modal').classList.add('hidden');
        }
        
        // 检查URL参数，如果有预填信息则自动填充
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // 如果从智能问答页面跳转过来，预填一些信息
            if (urlParams.has('from') && urlParams.get('from') === 'ai_chat') {
                if (urlParams.has('property_type')) {
                    document.getElementById('property-type').value = urlParams.get('property_type');
                }
                
                if (urlParams.has('need')) {
                    const needs = urlParams.get('need').split(',');
                    needs.forEach(need => {
                        const checkbox = document.getElementById(`need-${need}`);
                        if (checkbox) checkbox.checked = true;
                    });
                }
                
                if (urlParams.has('requirements')) {
                    document.getElementById('special-requirements').value = urlParams.get('requirements');
                }
            }
        });
    </script>
</body>
</html> 